<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•™ìƒ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
		 <style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
			font-family: 'í•¨ì´ˆë¡¬ë‹ì›€';
		}
		
		body {
			background-color: #f5f5f5;
			padding: 20px;
		}
		
		.container {
			max-width: 1200px;
			margin: 0 auto;
			background-color: white;
			padding: 30px;
			border-radius: 10px;
			box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
		}
		
		h1 {
		    text-align: center;
		    margin-bottom: 30px;
			background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);
		    background-size: 400% 400%;
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			animation: rainbowGlow 1s linear infinite;
		}
		
		@keyframes rainbowGlow {
			0% { background-position: 0% 50%; }
			50% { background-position: 100% 50%; }
			100% { background-position: 0% 50%; }
		}
		
		/* í¼ ì˜ì—­ ìŠ¤íƒ€ì¼ */
		.form-section {
			background-color: #f9f9f9;
			padding: 20px;
			border-radius: 8px;
			margin-bottom: 30px;
		}
		
		.form-section h2 {
			color: #CD4275;
			margin-bottom: 15px;
			font-size: 20px;
		}
		
		.form-group {
			margin-bottom: 15px;
		}
		
		label {
			display: block;
			margin-bottom: 5px;
			color: #555;
			font-weight: bold;
		}
		
		input[type="text"], input[type="number"] {
			width: 100%;
			padding: 10px;
			border: 1px solid #ddd;
			border-radius: 4px;
			font-size: 14px;
		}
		
		input[type="text"]:focus, input[type="number"]:focus {
			outline: none;
			border-color: #CD4275;
		}
		
		/* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
		button {
			padding: 10px 20px;
			border: none;
			border-radius: 4px;
			cursor: pointer;
			font-size: 14px;
			font-weight: bold;
			margin-right: 10px;
			transition: all 0.3s;
		}
		
		.btn-add { background-color: #CD4275; color: white; }
		.btn-add:hover { background-color: #BE2457	; }
		
		.btn-search { background-color: #2196F3; color: white; }
		.btn-search:hover { background-color: #0b7dda; }
		
		.btn-update { background-color: #ff9800; color: white; padding: 5px 10px; font-size: 12px; }
		.btn-update:hover { background-color: #e68900; }
		
		.btn-delete { background-color: #f44336; color: white; padding: 5px 10px; font-size: 12px; }
		.btn-delete:hover { background-color: #da190b; }
		
		.btn-reset { background-color: #9E9E9E; color: white; }
		.btn-reset:hover { background-color: #757575; }
		
		/* í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
		.table-section { margin-top: 30px; }
		
		.table-section h2 {
			color: #333;
			margin-bottom: 15px;
		}
		
		table {
			width: 100%;
			border-collapse: collapse;
			margin-top: 10px;
		}
		
		th {
			background-color: #CD4275;
			color: white;
			padding: 12px;
			text-align: left;
			font-weight: bold;
		}
		
		td {
			padding: 10px;
			border-bottom: 1px solid #ddd;
		}
		
		tr:hover { background-color: #f5f5f5; }
		
		/* ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ */
		.message {
			padding: 10px;
			margin-bottom: 15px;
			border-radius: 4px;
			display: none;
		}
		
		.message.success {
			background-color: #d4edda;
			color: #155724;
			border: 1px solid #c3e6cb;
		}
		
		.message.error {
			background-color: #f8d7da;
			color: #721c24;
			border: 1px solid #f5c6cb;
		}
		
		/* ë¹ˆ ë°ì´í„° ë©”ì‹œì§€ */
		.no-data {
			text-align: center;
			padding: 20px;
			color: #999;
		}
		</style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§‘ğŸ»â€ğŸ“ í•™ìƒ ê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
        
        <!-- ë©”ì‹œì§€ í‘œì‹œ ì˜ì—­ -->
        <div id="message" class="message"></div>
        
        <!-- í•™ìƒ ì¶”ê°€/ìˆ˜ì • í¼ -->
        <div class="form-section">
            <h2 id="formTitle">âœï¸ í•™ìƒ ì¶”ê°€</h2>
            <form id="studentForm">
                <!-- ìˆ˜ì • ì‹œ ì‚¬ìš©í•  hidden input (ID ì €ì¥ìš©) -->
                <input type="hidden" id="studentId">
                
                <div class="form-group">
                    <label for="name">ì´ë¦„ *</label>
                    <input type="text" id="name" placeholder="ì˜ˆ: ê¹€ì² ìˆ˜" required>
                </div>
                
                <div class="form-group">
                    <label for="age">ë‚˜ì´ *</label>
                    <input type="number" id="age" placeholder="ì˜ˆ: 20" min="1" max="100" required>
                </div>
                
                <div class="form-group">
                    <label for="major">ì „ê³µ *</label>
                    <input type="text" id="major" placeholder="ì˜ˆ: ì»´í“¨í„°ê³µí•™" required>
                </div>
                
                <button type="submit" class="btn-add" id="submitBtn">ì¶”ê°€í•˜ê¸°</button>
                <button type="button" class="btn-reset" onclick="resetForm()">ì´ˆê¸°í™”</button>
            </form>
        </div>
        
        <!-- í•™ìƒ ê²€ìƒ‰ í¼ -->
        <div class="form-section">
            <h2>ğŸ” í•™ìƒ ê²€ìƒ‰ (IDë¡œ ê²€ìƒ‰)</h2>
            <div style="display: flex; gap: 10px;">
                <input type="number" id="searchId" placeholder="í•™ìƒ ID ì…ë ¥" style="flex: 1;">
                <button class="btn-search" onclick="searchStudent()" style="background: #CD4275;">ê²€ìƒ‰</button>
                <button class="btn-reset" onclick="loadAllStudents()">ì „ì²´ ë³´ê¸°</button>
            </div>
        </div>
        
        <!-- í•™ìƒ ëª©ë¡ í…Œì´ë¸” -->
        <div class="table-section">
            <h2>ğŸ‘¥ í•™ìƒ ëª©ë¡</h2>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>ì´ë¦„</th>
                        <th>ë‚˜ì´</th>
                        <th>ì „ê³µ</th>
                        <th>ê´€ë¦¬</th>
                    </tr>
                </thead>
                <tbody id="studentList">
                    <!-- JavaScriptë¡œ ë™ì ìœ¼ë¡œ ì¶”ê°€ë¨ -->
                    <tr>
                        <td colspan="5" class="no-data">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
	<script>
    window.onload = function () {
        loadAllStudents();
    };

    // í•™ìƒ ì¶”ê°€ ìˆ˜ì • - í¼ ì œì¶œì‹œ í˜¸ì¶œë¨
    document.getElementById('studentForm').addEventListener('submit', function (e) {
        e.preventDefault();

        // ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸°
        const id = document.getElementById('studentId').value;
        const name = document.getElementById('name').value;
        const age = document.getElementById('age').value;
        const major = document.getElementById('major').value;
        
        // í•™ìƒ ê°ì²´ ìƒì„±
        const student = {
            name: name,
            age: parseInt(age),
            major: major
        };
        
        // IDê°€ ìˆìœ¼ë©´ ìˆ˜ì •, ì—†ìœ¼ë©´ ì¶”ê°€
        if (id) {
            updateStudent(id, student);
        } else {
            addStudent(student);
        }
        
        /* 
            í•™ìƒ ì¶”ê°€ í•¨ìˆ˜
            fetch : ì„œë²„ì— post ìš”ì²­ì„ ë³´ëƒ„
            JSON.stringify : ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¥¼ JSON ë¬¸ìì—´ë¡œ ë³€í™˜
        */
        function addStudent(student) {
            fetch('/student/api/insert', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json' // JSON í˜•ì‹ìœ¼ë¡œ ì „ì†¡
                },
                body: JSON.stringify(student) // ê°ì²´ë¥¼ JSON ë¬¸ìì—´ë¡œ ë³€í™˜
            })
            .then(response => response.json()) // ì‘ë‹µì„ JSONìœ¼ë¡œ íŒŒì‹±
            .then(data => {
                showMessage('í•™ìƒ ì¶”ê°€ ì™„ë£Œ! ID : ' + data.id, 'success');
                resetForm(); // í¼ ì´ˆê¸°í™”
                loadAllStudents();
            })
            .catch(error => {
                showMessage('ì¶”ê°€ì‹¤íŒ¨: ' + error, 'error');
            });
        }
    });

    // ì „ì²´ í•™ìƒ ì¡°íšŒ - getìš”ì²­ìœ¼ë¡œ ì„œë²„ì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
    function loadAllStudents() {
        fetch('/student/api/list') // fetchí•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ ë¹„ë™ê¸°ì‹ GETì„ í˜¸ì¶œ
        .then(response => response.json())
        .then(data => {
            displayStudents(data);
        })
        .catch(error => {
            showMessage('ì¡°íšŒì‹¤íŒ¨ ' + error, 'error');
        });
    }
    
    // í¼ ì´ˆê¸°í™”
    function resetForm() {
        document.getElementById('studentForm').reset();
        document.getElementById('studentId').value = '';
        document.getElementById('formTitle').textContent = 'âœï¸ í•™ìƒì¶”ê°€';
        document.getElementById('submitBtn').textContent = 'â• ì¶”ê°€í•˜ê¸°';
        document.getElementById('submitBtn').className = 'btn-add';
    }
    
    // í•™ìƒ ëª©ë¡ í…Œì´ë¸”ì— í‘œì‹œ
    function displayStudents(students) {
        const tbody = document.getElementById('studentList');
        tbody.innerHTML = ''; // ê¸°ì¡´ ë‚´ìš© ì‚­ì œ
        
        if (students.length === 0) {
            tbody.innerHTML =
                '<tr><td colspan="5" class="no-data">ë“±ë¡ëœ í•™ìƒì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
            return;
        }
        
        students.forEach(student => {
            const row = `
                <tr>
                    <td>${student.id}</td>
                    <td>${student.name}</td>
                    <td>${student.age}</td>
                    <td>${student.major}</td>
                    <td>
                        <button class="btn-update"
                            onclick="editStudent(${student.id}, '${student.name}', ${student.age}, '${student.major}')">ìˆ˜ì •</button>
                        <button class="btn-delete"
                            onclick="deleteStudent(${student.id})">ì‚­ì œ</button>
                    </td>
                </tr>
            `;
            tbody.innerHTML += row;
        });
    }

    // ë©”ì‹œì§€ í‘œì‹œ
    function showMessage(message, type) {
        const messageDiv = document.getElementById('message');
        messageDiv.textContent = message;
        messageDiv.className = 'message ' + type;
        messageDiv.style.display = 'block';
        
        // 3ì´ˆí›„ ìë™ìœ¼ë¡œ ìˆ¨ê¹€
        setTimeout(() => {
            messageDiv.style.display = 'none';
        }, 3000);
    }
</script>

</body>
</html>
