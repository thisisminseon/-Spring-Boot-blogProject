<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:replace="~{sample/fragment/layout :: head}"></th:block>
    
    <style>
        .form-container {
            max-width: 600px;
            margin: 0 auto;
        }
        
        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
        }
        
        .required::after {
            content: " *";
            color: #e74c3c;
        }
    </style>
</head>

<body>
    <div th:replace="~{sample/fragment/layout :: header}"></div>
    
    <main>
        <div class="card form-container">
            <h2>✏️ 새 사용자 등록</h2>
            <p style="color: #777; margin-bottom: 2rem;">
                모든 필수 항목(*)을 입력해주세요.
            </p>
            
            <!--
                th:action="@{/register}"
                - 폼 제출 시 /register로 POST 요청
                
                th:object="${user}"
                - user 객체와 폼을 바인딩
                - th:field="*{필드명}"으로 간편하게 입력 필드 생성
            -->
            <form th:action="@{/sample/register}" th:object="${user}" method="post">
                
                <!-- 이름 입력 -->
                <div class="form-group">
                    <label for="name" class="required">이름</label>
                    <!--
                        th:field="*{name}"
                        - id="name", name="name", value="${user.name}" 자동 생성
                        - 폼 제출 시 user.setName() 자동 호출
                    -->
                    <input type="text" 
                           id = "name"
                           th:field="*{name}" 
                           placeholder="홍길동"
                           required
                           maxlength="50">
                </div>
                
                <!-- 나이 입력 -->
                <div class="form-group">
                    <label for="age" class="required">나이</label>
                    <input type="number" 
                           id = "age"
                           th:field="*{age}" 
                           placeholder="25"
                           required
                           min="1" 
                           max="120">
                </div>
                
                <!-- 이메일 입력 -->
                <div class="form-group">
                    <label for="email" class="required">이메일</label>
                    <input type="email" 
                           id="email" 
                           th:field="*{email}" 
                           placeholder="example@email.com"
                           required>
                </div>
                
                <!-- 역할 선택 (라디오 버튼) -->
                <div class="form-group">
                    <label class="required">역할</label>
                    <div style="display: flex; gap: 2rem; margin-top: 0.5rem;">
                        <!--
                            th:field="*{role}"
                            - 같은 필드명으로 여러 라디오 버튼 바인딩
                            - value에 해당하는 값이 선택되면 user.setRole() 호출
                        -->
                        <label>
                            <input type="radio" th:field="*{role}" value="ADMIN">
                            관리자
                        </label>
                        <label>
                            <input type="radio" th:field="*{role}" value="USER" checked>
                            일반 사용자
                        </label>
                        <label>
                            <input type="radio" th:field="*{role}" value="GUEST">
                            게스트
                        </label>
                    </div>
                </div>
                
                <!-- 활성화 여부 (체크박스) -->
                <div class="form-group">
                    <label>
                        <!--
                            th:field="*{active}"
                            - 체크하면 true, 안 하면 false
                            - user.setActive() 자동 호출
                        -->
                        <input type="checkbox" th:field="*{active}" checked>
                        계정 활성화
                    </label>
                    <p style="font-size: 0.9rem; color: #777; margin-top: 0.5rem;">
                        체크하면 바로 사용 가능한 계정이 됩니다.
                    </p>
                </div>
                
                <!-- 제출 버튼 -->
                <div class="form-actions">
                    <a th:href="@{/sample/users}" class="btn btn-secondary">취소</a>
                    <button type="submit" class="btn">등록하기</button>
                </div>
            </form>
        </div>
    </main>
    
    <div th:replace="~{sample/fragment/layout :: footer}"></div>
    
    <th:block th:replace="~{sample/fragment/layout :: scripts}"></th:block>
    
    <script>
        // 폼 제출 전 유효성 검사
        document.querySelector('form').addEventListener('submit', function(e) {
            const name = document.getElementById('name').value.trim();
            const age = document.getElementById('age').value;
            const email = document.getElementById('email').value.trim();
            
            if (!name || !age || !email) {
                e.preventDefault();
                alert('모든 필수 항목을 입력해주세요.');
                return false;
            }
            
            console.log('폼 제출!');
        });
    </script>
</body>
</html>